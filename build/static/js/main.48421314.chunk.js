(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,i){"use strict";i.d(t,"a",function(){return n});const n={uqBasedata:"bruce/mi",appIcon:"http://101.200.46.56/imgs/Bear-icon.png",miApiHost:"http://106.14.213.254/",miApiHostDebug:"http://localhost:6010/",isDevelopment:!1}},46:function(e,t,i){e.exports=i.p+"static/media/logo.5d5d9eef.svg"},49:function(e,t,i){e.exports=i(82)},56:function(e,t,i){},80:function(e,t,i){},82:function(e,t,i){"use strict";i.r(t);var n=i(0),r=i(25),o=(i(54),i(12)),s=(i(56),i(14)),a=i(45),l=i.n(a);const c=()=>{let e=l()({loader:()=>i.e(2).then(i.bind(null,85)),loading:s.i});return n.createElement(e,null)},d=e=>!0===e?"text-primary":"text-muted";var h=i(46),u=i.n(h);class m extends s.s{render(){n.createElement(s.d,{name:"globe"}),n.createElement("div",null,"\u767b\u5f55");let e=n.createElement("img",{className:"m-1",src:u.a,alt:"logo",style:{height:"3rem",width:"3rem"}});return n.createElement(s.g,{className:"mb-3 align-items-center bg-white",left:e,right:void 0},n.createElement("div",{className:""},this.controller.renderSearchHeader("md")))}}class p extends s.s{constructor(){super(...arguments),this.onSearch=(e=>o.a(this,void 0,void 0,function*(){}))}render(e){return n.createElement(s.o,{className:"px-1 w-100",size:e,onSearch:this.onSearch,placeholder:"\u529f\u80fd..."})}}var v=i(38);class g extends s.s{constructor(){super(...arguments),this.renderSection=((e,t)=>n.createElement("section",null,n.createElement("h4",null,e.title,n.createElement("small",{className:"text-muted"},e.subtitle)),n.createElement("p",null,e.content))),this.page=Object(v.a)(()=>{let{openMetaView:e,onPage:t}=this.controller,i=(this.controller.renderSiteHeader(),n.createElement(n.Fragment,null));return this.controller.isLogined&&(i=n.createElement("button",{type:"button",className:"btn w-100",onClick:e},"view")),n.createElement(s.l,{header:"\u80a1\u7968\u5217\u8868",onScrollBottom:t,headerClassName:"bg-primary py-1 px-3"},n.createElement(this.content,null))}),this.onSelect=((e,t,i)=>{}),this.renderTestRow=(()=>n.createElement("div",null,"ddd")),this.content=Object(v.a)(()=>{let{PageItems:e}=this.controller,t=n.createElement("div",{className:"px-3"},n.createElement("div",{className:"px-3",style:this.width6}),n.createElement("div",{className:"px-3",style:this.width8},"PE"),n.createElement("div",{className:"px-3",style:this.width8},"ROE"),n.createElement("div",{className:"px-3",style:this.width8},"PRICE"));return n.createElement(n.Fragment,null,n.createElement(s.h,{header:t,items:e.items,item:{render:this.renderRow,onClick:this.onSelected,key:this.rowKey},before:"\u641c\u7d22 \u8d44\u6599"}))}),this.renderRow=((e,t)=>n.createElement(this.rowContent,Object.assign({},e))),this.width6={width:"6rem"},this.width8={width:"8rem"},this.rowContent=(e=>{let{id:t,name:i,code:r,pe:o,roe:a,price:l,order:c}=e,d=n.createElement("div",{className:"",style:this.width6},n.createElement("span",{className:"text-primary"},i),n.createElement("br",null),r);return n.createElement(s.g,{className:"px-3 py-2",left:d,right:c.toString(),onClick:()=>this.onClickName(e)},n.createElement("div",{className:"d-flex flex-wrap"},n.createElement("div",{className:"px-3 d-flex",style:this.width8},o.toFixed(2)),n.createElement("div",{className:"px-3",style:this.width8}," ",(100*a).toFixed(2)),n.createElement("div",{className:"px-3",style:this.width8}," ",l.toFixed(2))))}),this.rowKey=(e=>{let{id:t}=e;return t}),this.onClickName=(e=>{let{symbol:t}=e,i=`http://finance.sina.com.cn/realstock/company/${t}/nc.shtml`;return window.open(i,"_blank").blur(),window.focus(),!1}),this.onSelected=(e=>o.a(this,void 0,void 0,function*(){})),this.clickRow=(e=>{this.callOnSelected(e)})}open(e){return o.a(this,void 0,void 0,function*(){})}render(e){return n.createElement(this.page,null)}callOnSelected(e){void 0!==this.onSelected?this.onSelected(e):alert("onSelect is undefined")}}class f extends s.m{constructor(e){super(!0),this.cHome=e,this.pageSize=30,this.firstSize=30}load(e,t,i){return o.a(this,void 0,void 0,function*(){let e={name:"pe",pageStart:t,pageSize:i,user:this.cHome.user.id,yearlen:1},n=yield this.cHome.cApp.miApi.process(e,[]);return!1===Array.isArray(n)?[]:n})}setPageStart(e){this.pageStart=void 0===e?0:e.order}}class w extends s.c{constructor(e,t){super(t),this.onPage=(()=>{this.PageItems.more()}),this.renderSiteHeader=(()=>this.renderView(m)),this.renderSearchHeader=(e=>this.renderView(p,e)),this.renderHome=(()=>this.renderView(g)),this.openMetaView=(()=>{}),this.tab=(()=>n.createElement(this.renderHome,null)),this.buildPageItems(),this.cApp=e,this.vHome=new g(this)}buildPageItems(){return this.PageItems=new f(this)}searchMain(e){return o.a(this,void 0,void 0,function*(){void 0===this.PageItems&&(this.PageItems=this.buildPageItems()),void 0!==e&&(yield this.PageItems.first(e))})}internalStart(e){return o.a(this,void 0,void 0,function*(){})}}var y=i(29),E=i(17),b=i.n(E);class x{constructor(e,t,i){this.startWait=(()=>{void 0!==this.ui&&this.ui.startWait()}),this.endWait=((e,t)=>{void 0!==this.ui&&this.ui.endWait(),void 0!==t&&t("\u8bbf\u95eewebapi\u8d85\u65f6 "+e)}),this.showError=(e=>o.a(this,void 0,void 0,function*(){void 0!==this.ui&&(yield this.ui.showError(e))})),this.hostUrl=e,this.apiToken=t,this.ui=i,this.timeout=!0===y.a.isDevelopment?5e5:5e3}used(){this.post("",{})}get(e,t){return o.a(this,void 0,void 0,function*(){if(t){let i=Object.keys(t);if(i.length>0){let n="?";for(let r of i){void 0!==t[r]&&(e+=n+r+"="+t[r],n="&")}}}let i=this.buildOptions();return i.method="GET",yield this.innerFetch(e,i)})}post(e,t){return o.a(this,void 0,void 0,function*(){let i=this.buildOptions();return i.method="POST",i.body=JSON.stringify(t),yield this.innerFetch(e,i)})}put(e,t){return o.a(this,void 0,void 0,function*(){let i=this.buildOptions();return i.method="PUT",i.body=JSON.stringify(t),yield this.innerFetch(e,i)})}delete(e,t){return o.a(this,void 0,void 0,function*(){let i=this.buildOptions();return i.method="DELETE",i.body=JSON.stringify(t),yield this.innerFetch(e,i)})}fetch(e,t,i,n){return o.a(this,void 0,void 0,function*(){let r=this;this.startWait();let a=e;function l(e){return{channel:r,url:a,options:t,resolve:i,reject:n,error:e}}try{console.log("%s %s",t.method,a);let d=setTimeout(()=>r.endWait(e,n),this.timeout),h=yield fetch(encodeURI(a),t);if(!1===h.ok)throw clearTimeout(d),r.endWait(),console.log("call error %s",h.statusText),h.statusText;let u=h.headers.get("content-type");if(u&&u.indexOf("json")>=0)return h.json().then(e=>o.a(this,void 0,void 0,function*(){if(clearTimeout(d),r.endWait(),!0===e.ok)return i(e.res);void 0===e.error?yield r.showError(l("not valid tonva json")):(yield r.showError(l(e.error)),n(e.error))})).catch(e=>o.a(this,void 0,void 0,function*(){yield r.showError(l(e.message))}));{let e=yield h.text();clearTimeout(d),r.endWait(),i(e)}}catch(c){if("string"===typeof c&&!0===c.toLowerCase().startsWith("unauthorized"))return void s.t.logout();yield this.showError(l(c.message))}})}innerFetch(e,t){return o.a(this,void 0,void 0,function*(){let i=this.hostUrl+e;return yield new Promise((e,n)=>o.a(this,void 0,void 0,function*(){yield this.fetch(i,t,e,n)}))})}callFetch(e,t,i){return o.a(this,void 0,void 0,function*(){let n=this.buildOptions();return n.method=t,n.body=i,yield new Promise((t,i)=>o.a(this,void 0,void 0,function*(){yield this.fetch(e,n,t,i)}))})}buildOptions(){let{language:e,culture:t}=s.t,i=new Headers;i.append("Content-Type","application/json;charset=UTF-8");let n=e;return t&&(n+="-"+t),i.append("Accept-Language",n),this.apiToken&&i.append("Authorization",this.apiToken),{headers:i}}}class S{startWait(){s.t.startWait()}endWait(){s.t.endWait()}showError(e){return o.a(this,void 0,void 0,function*(){s.t.endWait(),yield s.t.onError(e)})}}class N{constructor(e,t){this.path=e||"",this.showWaiting=t}call(e,t,i){return o.a(this,void 0,void 0,function*(){let n=yield this.getHttpChannel();return yield n.callFetch(e,t,i)})}get(e,t){return o.a(this,void 0,void 0,function*(){let i=yield this.getHttpChannel();return yield i.get(this.path+e,t)})}post(e,t){return o.a(this,void 0,void 0,function*(){let i=yield this.getHttpChannel();return yield i.post(this.path+e,t)})}put(e,t){return o.a(this,void 0,void 0,function*(){let i=yield this.getHttpChannel();return yield i.put(this.path+e,t)})}delete(e,t){return o.a(this,void 0,void 0,function*(){let i=yield this.getHttpChannel();return yield i.delete(this.path+e,t)})}}let k={},H={};class O extends N{constructor(e,t,i,n,r){super(t,r),this.showWaiting=r,this.apiName=i,this.token=n,this.url=e}getHttpChannel(){return o.a(this,void 0,void 0,function*(){let e,t;!0===this.showWaiting||void 0===this.showWaiting?(e=k,t=new S):e=H;let i=e[this.apiName];return void 0!==i?i:(i=new x(this.url,this.token,t),e[this.apiName]=i)})}query(e,t){return o.a(this,void 0,void 0,function*(){let i={call:e,params:t};return yield this.post("sql/call",i)})}page(e,t,i,n){return o.a(this,void 0,void 0,function*(){let r;switch(typeof t){case"undefined":r=[];break;default:r=b.a.clone(t)}r.push(i),r.push(n);let o={call:e,params:r};return yield this.post("sql/call",o)})}process(e,t){return o.a(this,void 0,void 0,function*(){let i={proc:e,params:t};return yield this.post("sql/query",i)})}}var P={appName:"bruce/mi",CApp:class extends s.a{internalStart(){return o.a(this,void 0,void 0,function*(){this.isLogined,s.t;let e=this.user.token,t=y.a.isDevelopment?y.a.miApiHostDebug:y.a.miApiHost;this.miApi=new O(t,"fsjs/","miapi",e,!1),this.cHome=new w(this,void 0),Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"101.200.46.56",REACT_APP_MIDATA_HOST:"106.14.213.254"}),this.cHome.searchMain(""),this.showMain()})}showMain(e){this.openVPage(this.VAppMain,e)}showOneVPage(e,t){return o.a(this,void 0,void 0,function*(){yield new e(this).open(t)})}onDispose(){}},main:class extends s.r{constructor(){super(...arguments),this.render=(e=>{let{cHome:t}=this.controller,i=[{name:"home",label:"\u9996\u9875",icon:"home",content:t.tab,notify:void 0},{name:"me",label:"\u6211\u7684",icon:"user",content:c}].map(e=>{let{name:t,label:i,icon:n,content:r,notify:o}=e;return{name:t,caption:e=>Object(s.p)(i,n,d(e)),content:r,notify:o}});return n.createElement(s.l,{header:!1},n.createElement(s.q,{tabs:i}))})}open(e){return o.a(this,void 0,void 0,function*(){this.openPage(this.render)})}},uqs:{"bruce/mi":{}}};var C=class extends n.Component{constructor(){super(...arguments),this.onLogined=(()=>o.a(this,void 0,void 0,function*(){yield Object(s.u)(P)}))}render(){return n.createElement(s.k,{onLogined:this.onLogined})}};i(80);const T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function W(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=(()=>{const t=e.installing;t&&(t.onstatechange=(()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}))})}).catch(e=>{console.error("Error during service worker registration:",e)})}r.render(n.createElement(C,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="./service-worker.js";T?(function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):W(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):W(e)})}}()}},[[49,5,3]]]);
//# sourceMappingURL=main.48421314.chunk.js.map