(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,i){"use strict";i.d(t,"a",function(){return n});const n={uqBasedata:"bruce/mi",appIcon:"http://101.200.46.56/imgs/Bear-icon.png",miApiHost:"http://106.14.213.254/",miApiHostDebug:"http://localhost:6010/",isDevelopment:!1}},38:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i(12),r=i(0),s=i(14),a=i(29);class o extends s.r{constructor(){super(...arguments),this.page=Object(a.a)(()=>{let{openMetaView:e}=this.controller,t=r.createElement(r.Fragment,null);return this.controller.isLogined&&(t=r.createElement("button",{type:"button",className:"btn w-100",onClick:e},"view")),r.createElement(s.l,{header:"\u80a1\u7968\u4fe1\u606f",headerClassName:"bg-primary"},r.createElement(this.content,null))}),this.content=Object(a.a)(()=>r.createElement(r.Fragment,null,r.createElement(this.baseInfo,null),r.createElement(this.capitalEarning,null),r.createElement(this.bonus,null))),this.caption=(e=>r.createElement("span",{className:"text-muted small"},e,": ")),this.baseInfo=(()=>{let{name:e,code:t,pe:i,roe:n,price:a,order:o}=this.controller.baseItem,l=r.createElement("div",{className:"c6"},r.createElement("span",{className:"text-primary"},e),r.createElement("br",null),t);return r.createElement(r.Fragment,null,r.createElement("div",{className:"px-3 py-1"},"\u540d\u79f0"),r.createElement(s.g,{className:"px-3 py-2 bg-white",left:l,onClick:()=>this.onClickName(this.controller.baseItem)},r.createElement("div",{className:"d-flex flex-wrap"},r.createElement("div",{className:"px-3 c8"},this.caption("PE"),i.toFixed(2)),r.createElement("div",{className:"px-3 c8"},this.caption("ROE"),(100*n).toFixed(2)),r.createElement("div",{className:"px-3 c8"},this.caption("Price"),a.toFixed(2)))))}),this.onClickName=(e=>{let{symbol:t}=e;event.preventDefault();let i=`http://finance.sina.com.cn/realstock/company/${t}/nc.shtml`;window.open(i,"_blank")}),this.capitalEarning=Object(a.a)(()=>{let e=this.controller.capitalearning,t=r.createElement("div",{className:"px-3"},r.createElement("div",{className:"px-3 c6"},"\u5e74"),r.createElement("div",{className:"px-3 c6 text-right"},"\u80a1\u672c"),r.createElement("div",{className:"px-3 c6 text-right"},"\u6536\u76ca"),r.createElement("div",{className:"px-3 c6 text-right"},"ROE"));return r.createElement(r.Fragment,null,r.createElement("div",{className:"px-3 py-1"},"\u5386\u5e74\u80a1\u672c\u6536\u76ca"),r.createElement(s.h,{header:t,loading:"...",items:e,item:{render:e=>{let{capital:t,earning:i}=e;return r.createElement("div",{className:"px-3 py-2 d-flex flex-wrap"},r.createElement("div",{className:"px-3 c6"},e.year),r.createElement("div",{className:"px-3 c6 text-right"}," ",t.toFixed(2)),r.createElement("div",{className:"px-3 c6 text-right"}," ",i.toFixed(2)),r.createElement("div",{className:"px-3 c6 text-right"}," ",(i/t).toFixed(2)))}}}))}),this.bonus=Object(a.a)(()=>{let e=this.controller.bonus,t=r.createElement("div",{className:"px-3"},r.createElement("div",{className:"px-3 c8"},"\u65e5\u671f"),r.createElement("div",{className:"px-3 c6 text-right"},"\u5206\u7ea2"));return r.createElement(r.Fragment,null,r.createElement("div",{className:"px-3 py-1"},"\u5386\u5e74\u5206\u7ea2"),r.createElement(s.h,{header:t,loading:"...",items:e,item:{render:e=>r.createElement("div",{className:"px-3 py-2 d-flex flex-wrap"},r.createElement("div",{className:"px-3 c8"},e.day),r.createElement("div",{className:"px-3 c6 text-right"}," ",e.bonus.toFixed(2)))}}))})}open(e){return n.a(this,void 0,void 0,function*(){this.openPage(this.page)})}render(e){return r.createElement(this.page,null)}}},40:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i(14);class r extends n.b{}},46:function(e,t){},47:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i(12),r=i(17),s=i(40),a=i(38);class o extends s.a{constructor(){super(...arguments),this.loaded=!1,this._earning=r.i.array([],{deep:!0}),this._capitalearning=r.i.array([],{deep:!0}),this._bonus=r.i.array([],{deep:!0}),this._divideInfo=r.i.array([],{deep:!0}),this.loadData=(()=>{this.loading()}),this.loading=(()=>n.a(this,void 0,void 0,function*(){if(!this.baseItem)return;let{id:e}=this.baseItem,t=yield this.cApp.miApi.query("q_stockallinfo",[e]);if(Array.isArray(t)){let e=t[1];Array.isArray(e)&&(this.price=e[0]);let i=t[2];Array.isArray(i)&&(this.roe=i[0]),this._earning.length>0&&this._earning.clear();let n=t[3];Array.isArray(n)&&this._earning.push(...n),this._capitalearning.length>0&&this._capitalearning.clear();let r=t[4];Array.isArray(r)&&this._capitalearning.push(...r),this._bonus.length>0&&this._bonus.clear();let s=t[5];Array.isArray(s)&&this._bonus.push(...s),this._divideInfo.length>0&&this._divideInfo.clear();let a=t[6];Array.isArray(a)&&this._divideInfo.push(...a)}this.loaded=!0})),this.openMetaView=(()=>{})}get earning(){if(!1!==this.loaded)return this._earning}get capitalearning(){if(!1!==this.loaded)return this._capitalearning}get bonus(){if(!1!==this.loaded)return this._bonus}get divideInfo(){if(!1!==this.loaded)return this._divideInfo}internalStart(e){return n.a(this,void 0,void 0,function*(){this.baseItem=e,this.loadData(),this.openVPage(a.a)})}}n.b([r.i],o.prototype,"loaded",void 0),n.b([r.i],o.prototype,"price",void 0),n.b([r.i],o.prototype,"roe",void 0),n.b([r.b],o.prototype,"earning",null),n.b([r.b],o.prototype,"capitalearning",null),n.b([r.b],o.prototype,"bonus",null),n.b([r.b],o.prototype,"divideInfo",null)},50:function(e,t,i){"use strict";i(46);var n=i(47);i.d(t,"CStockInfo",function(){return n.a});i(38)},51:function(e,t,i){e.exports=i.p+"static/media/logo.5d5d9eef.svg"},55:function(e,t,i){e.exports=i(88)},62:function(e,t,i){},86:function(e,t,i){},88:function(e,t,i){"use strict";i.r(t);var n=i(0),r=i(26),s=(i(60),i(12)),a=(i(62),i(14)),o=i(40),l=i(50),c=i(51),d=i.n(c);class h extends a.s{render(){n.createElement(a.d,{name:"globe"}),n.createElement("div",null,"\u767b\u5f55");let e=n.createElement("img",{className:"m-1",src:d.a,alt:"logo",style:{height:"3rem",width:"3rem"}});return n.createElement(a.g,{className:"mb-3 align-items-center bg-white",left:e,right:void 0},n.createElement("div",{className:""},this.controller.renderSearchHeader("md")))}}class u extends a.s{constructor(){super(...arguments),this.onSearch=(e=>s.a(this,void 0,void 0,function*(){}))}render(e){return n.createElement(a.o,{className:"px-1 w-100",size:e,onSearch:this.onSearch,placeholder:"\u529f\u80fd..."})}}var m=i(29);class p extends a.s{constructor(){super(...arguments),this.page=Object(m.a)(()=>{let{openMetaView:e,onPage:t}=this.controller,i=n.createElement(n.Fragment,null);return this.controller.isLogined&&(i=n.createElement("button",{type:"button",className:"btn w-100",onClick:e},"view")),n.createElement(a.l,{header:"\u80a1\u7968\u5217\u8868",onScrollBottom:t,headerClassName:"bg-primary py-1 px-3"},n.createElement(this.content,null))}),this.onSelect=((e,t,i)=>{}),this.content=Object(m.a)(()=>{let{PageItems:e}=this.controller,t=n.createElement("div",{className:"px-3"},n.createElement("div",{className:"px-3",style:this.width6}),n.createElement("div",{className:"px-3",style:this.width8},"PE"),n.createElement("div",{className:"px-3",style:this.width8},"ROE"),n.createElement("div",{className:"px-3",style:this.width8},"PRICE"));return n.createElement(n.Fragment,null,n.createElement(a.h,{header:t,items:e.items,item:{render:this.renderRow,onClick:this.onSelected,key:this.rowKey},before:"\u641c\u7d22 \u8d44\u6599"}))}),this.renderRow=((e,t)=>n.createElement(this.rowContent,Object.assign({},e))),this.width6={width:"6rem"},this.width8={width:"8rem"},this.rowContent=(e=>{let{id:t,name:i,code:r,pe:s,roe:o,price:l,order:c}=e,d=n.createElement("div",{className:"",style:this.width6},n.createElement("span",{className:"text-primary"},i),n.createElement("br",null),r);return n.createElement(a.g,{className:"px-3 py-2",left:d,right:c.toString(),onClick:()=>this.onClickName(e)},n.createElement("div",{className:"d-flex flex-wrap"},n.createElement("div",{className:"px-3 d-flex",style:this.width8},s.toFixed(2)),n.createElement("div",{className:"px-3",style:this.width8}," ",(100*o).toFixed(2)),n.createElement("div",{className:"px-3",style:this.width8}," ",l.toFixed(2))))}),this.rowKey=(e=>{let{id:t}=e;return t}),this.onClickName=(e=>{this.controller.openStockInfo(e)}),this.onSelected=(e=>s.a(this,void 0,void 0,function*(){})),this.clickRow=(e=>{this.callOnSelected(e)})}render(e){return n.createElement(this.page,null)}callOnSelected(e){void 0!==this.onSelected?this.onSelected(e):alert("onSelect is undefined")}}class v extends a.m{constructor(e){super(!0),this.cHome=e,this.pageSize=30,this.firstSize=30}load(e,t,i){return s.a(this,void 0,void 0,function*(){let e={name:"pe",pageStart:t,pageSize:i,user:this.cHome.user.id,yearlen:1},n=yield this.cHome.cApp.miApi.process(e,[]);return!1===Array.isArray(n)?[]:n})}setPageStart(e){this.pageStart=void 0===e?0:e.order}}class g extends o.a{constructor(){super(...arguments),this.PageItems=new v(this),this.onPage=(()=>{this.PageItems.more()}),this.renderSiteHeader=(()=>this.renderView(h)),this.renderSearchHeader=(e=>this.renderView(u,e)),this.renderHome=(()=>this.renderView(p)),this.openMetaView=(()=>{}),this.tab=(()=>n.createElement(this.renderHome,null)),this.openStockInfo=(e=>{this.newC(l.CStockInfo).start(e)})}searchMain(e){return s.a(this,void 0,void 0,function*(){void 0!==e&&(yield this.PageItems.first(e))})}internalStart(e){return s.a(this,void 0,void 0,function*(){})}}var f=i(31),y=i(16),E=i.n(y);class w{constructor(e,t,i){this.startWait=(()=>{void 0!==this.ui&&this.ui.startWait()}),this.endWait=((e,t)=>{void 0!==this.ui&&this.ui.endWait(),void 0!==t&&t("\u8bbf\u95eewebapi\u8d85\u65f6 "+e)}),this.showError=(e=>s.a(this,void 0,void 0,function*(){void 0!==this.ui&&(yield this.ui.showError(e))})),this.hostUrl=e,this.apiToken=t,this.ui=i,this.timeout=!0===f.a.isDevelopment?5e5:5e3}used(){this.post("",{})}get(e,t){return s.a(this,void 0,void 0,function*(){if(t){let i=Object.keys(t);if(i.length>0){let n="?";for(let r of i){void 0!==t[r]&&(e+=n+r+"="+t[r],n="&")}}}let i=this.buildOptions();return i.method="GET",yield this.innerFetch(e,i)})}post(e,t){return s.a(this,void 0,void 0,function*(){let i=this.buildOptions();return i.method="POST",i.body=JSON.stringify(t),yield this.innerFetch(e,i)})}put(e,t){return s.a(this,void 0,void 0,function*(){let i=this.buildOptions();return i.method="PUT",i.body=JSON.stringify(t),yield this.innerFetch(e,i)})}delete(e,t){return s.a(this,void 0,void 0,function*(){let i=this.buildOptions();return i.method="DELETE",i.body=JSON.stringify(t),yield this.innerFetch(e,i)})}fetch(e,t,i,n){return s.a(this,void 0,void 0,function*(){let r=this;this.startWait();let o=e;function l(e){return{channel:r,url:o,options:t,resolve:i,reject:n,error:e}}try{console.log("%s %s",t.method,o);let d=setTimeout(()=>r.endWait(e,n),this.timeout),h=yield fetch(encodeURI(o),t);if(!1===h.ok)throw clearTimeout(d),r.endWait(),console.log("call error %s",h.statusText),h.statusText;let u=h.headers.get("content-type");if(u&&u.indexOf("json")>=0)return h.json().then(e=>s.a(this,void 0,void 0,function*(){if(clearTimeout(d),r.endWait(),!0===e.ok)return i(e.res);void 0===e.error?yield r.showError(l("not valid tonva json")):(yield r.showError(l(e.error)),n(e.error))})).catch(e=>s.a(this,void 0,void 0,function*(){yield r.showError(l(e.message))}));{let e=yield h.text();clearTimeout(d),r.endWait(),i(e)}}catch(c){if("string"===typeof c&&!0===c.toLowerCase().startsWith("unauthorized"))return void a.t.logout();yield this.showError(l(c.message))}})}innerFetch(e,t){return s.a(this,void 0,void 0,function*(){let i=this.hostUrl+e;return yield new Promise((e,n)=>s.a(this,void 0,void 0,function*(){yield this.fetch(i,t,e,n)}))})}callFetch(e,t,i){return s.a(this,void 0,void 0,function*(){let n=this.buildOptions();return n.method=t,n.body=i,yield new Promise((t,i)=>s.a(this,void 0,void 0,function*(){yield this.fetch(e,n,t,i)}))})}buildOptions(){let{language:e,culture:t}=a.t,i=new Headers;i.append("Content-Type","application/json;charset=UTF-8");let n=e;return t&&(n+="-"+t),i.append("Accept-Language",n),this.apiToken&&i.append("Authorization",this.apiToken),{headers:i}}}class b{startWait(){a.t.startWait()}endWait(){a.t.endWait()}showError(e){return s.a(this,void 0,void 0,function*(){a.t.endWait(),yield a.t.onError(e)})}}class x{constructor(e,t){this.path=e||"",this.showWaiting=t}call(e,t,i){return s.a(this,void 0,void 0,function*(){let n=yield this.getHttpChannel();return yield n.callFetch(e,t,i)})}get(e,t){return s.a(this,void 0,void 0,function*(){let i=yield this.getHttpChannel();return yield i.get(this.path+e,t)})}post(e,t){return s.a(this,void 0,void 0,function*(){let i=yield this.getHttpChannel();return yield i.post(this.path+e,t)})}put(e,t){return s.a(this,void 0,void 0,function*(){let i=yield this.getHttpChannel();return yield i.put(this.path+e,t)})}delete(e,t){return s.a(this,void 0,void 0,function*(){let i=yield this.getHttpChannel();return yield i.delete(this.path+e,t)})}}let N={},k={};class S extends x{constructor(e,t,i,n,r){super(t,r),this.showWaiting=r,this.apiName=i,this.token=n,this.url=e}getHttpChannel(){return s.a(this,void 0,void 0,function*(){let e,t;!0===this.showWaiting||void 0===this.showWaiting?(e=N,t=new b):e=k;let i=e[this.apiName];return void 0!==i?i:(i=new w(this.url,this.token,t),e[this.apiName]=i)})}}class A{constructor(e,t,i,n,r){this.channel=new S(e,t,i,n,r)}query(e,t){return s.a(this,void 0,void 0,function*(){let i={call:e,params:t};return yield this.channel.post("sql/call",i)})}page(e,t,i,n){return s.a(this,void 0,void 0,function*(){let r;switch(typeof t){case"undefined":r=[];break;default:r=E.a.clone(t)}r.push(i),r.push(n);let s={call:e,params:r};return yield this.channel.post("sql/call",s)})}process(e,t){return s.a(this,void 0,void 0,function*(){let i={proc:e,params:t};return yield this.channel.post("sql/query",i)})}}var C=i(52),O=i.n(C);const _=()=>{let e=O()({loader:()=>i.e(2).then(i.bind(null,91)),loading:a.i});return n.createElement(e,null)},I=e=>!0===e?"text-primary":"text-muted";class F extends a.r{constructor(){super(...arguments),this.render=(e=>{let{cHome:t}=this.controller,i=[{name:"home",label:"\u9996\u9875",icon:"home",content:t.tab,notify:void 0},{name:"me",label:"\u6211\u7684",icon:"user",content:_}].map(e=>{let{name:t,label:i,icon:n,content:r,notify:s}=e;return{name:t,caption:e=>Object(a.p)(i,n,I(e)),content:r,notify:s}});return n.createElement(a.l,{header:!1},n.createElement(a.q,{tabs:i}))})}open(e){return s.a(this,void 0,void 0,function*(){this.openPage(this.render)})}}class P extends a.a{internalStart(){return s.a(this,void 0,void 0,function*(){this.isLogined;a.t;let e=this.user.token,t=f.a.isDevelopment?f.a.miApiHostDebug:f.a.miApiHost;this.miApi=new A(t,"fsjs/","miapi",e,!1),this.cHome=this.newC(g);Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_CENTER_HOST:"101.200.46.56",REACT_APP_MIDATA_HOST:"106.14.213.254"});this.cHome.searchMain(""),this.openVPage(F)})}newC(e){return new e(this)}showOneVPage(e,t){return s.a(this,void 0,void 0,function*(){yield new e(this).open(t)})}onDispose(){}}const H={appName:"bruce/mi",version:"1.00",tvs:void 0};var W=class extends n.Component{constructor(){super(...arguments),this.onLogined=(()=>s.a(this,void 0,void 0,function*(){yield Object(a.u)(P,H)}))}render(){return n.createElement(a.k,{onLogined:this.onLogined})}};i(86);const T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function j(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=(()=>{const t=e.installing;t&&(t.onstatechange=(()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}))})}).catch(e=>{console.error("Error during service worker registration:",e)})}r.render(n.createElement(W,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(".",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="./service-worker.js";T?(function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):j(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):j(e)})}}()}},[[55,5,3]]]);
//# sourceMappingURL=main.fd8548cc.chunk.js.map